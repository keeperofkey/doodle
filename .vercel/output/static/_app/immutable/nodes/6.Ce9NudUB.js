import{s as g,o as E,n as P}from"../chunks/scheduler.BvLojk_z.js";import{S as x,i as M,e as C,o as W,c as k,k as A,p as H,h as f,b as L,d as G,q as N,t as R,f as z,r as D}from"../chunks/index.ijGnfrI7.js";import{S as q,G as F,M as I,A as j,W as B,a as T,P as V,b as Y,C as J,c as K}from"../chunks/meshopt_decoder.module.B4E2A3GH.js";function O(m,n,t){let{modelName:i}=n;return E(()=>{const e=document.getElementById("three"),c=document.getElementById("splat");let d,p,a,o,l=new q;c.style.display="none",e.style.display="block",e.style.width="100%",e.style.height="100%",e.style.position="fixed";const v=new K;function y(){new F().setPath("models/").setMeshoptDecoder(I).load(i,function(r){r.scene.up.set(0,0,1);const w=r.animations;a=r.cameras[0],p=new j(r),d=p.clipAction(w[0],a),a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),d.play(),d.paused=!0,document.addEventListener("scroll",_),window.addEventListener("resize",S),l.add(r.scene),h()}),o=new B({canvas:e,antialias:!0}),o.setPixelRatio(window.devicePixelRatio),o.setSize(window.innerWidth,window.innerHeight),o.toneMapping=T,o.toneMappingExposure=1;const s=new V(o),u=new Y;u.position.set(0,0,0),l.add(u),l.background=new J(4126537205),l.environment=s.fromScene(l).texture}function _(){let s=window.scrollY/(document.body.scrollHeight-window.innerHeight);s=((r,w,b)=>Math.min(Math.max(r,w),b))(s,0,.99),d.time=s*d.getClip().duration}function S(){a.aspect=window.innerWidth/window.innerHeight,a.updateProjectionMatrix(),o.setSize(window.innerWidth,window.innerHeight)}function h(){requestAnimationFrame(h);const s=v.getDelta();p.update(s),$()}function $(){o.clear(),o.render(l,a)}y()}),m.$$set=e=>{"modelName"in e&&t(0,i=e.modelName)},[i]}class Q extends x{constructor(n){super(),M(this,n,O,null,g,{modelName:0})}}function U(m){let n,t,i;return t=new Q({props:{modelName:"mesh-one-anim-24.glb"}}),{c(){n=C("div"),W(t.$$.fragment),this.h()},l(e){n=k(e,"DIV",{class:!0});var c=A(n);H(t.$$.fragment,c),c.forEach(f),this.h()},h(){L(n,"class","container svelte-5oaak8")},m(e,c){G(e,n,c),N(t,n,null),i=!0},p:P,i(e){i||(R(t.$$.fragment,e),i=!0)},o(e){z(t.$$.fragment,e),i=!1},d(e){e&&f(n),D(t)}}}class ne extends x{constructor(n){super(),M(this,n,null,U,g,{})}}export{ne as component};
